<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Honeypot Attack Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 500px; width: 100%; }
    </style>
</head>
<body>
    <h1>Welcome to my Azure Honeypot Project</h1>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Attack data directly in this file
        var attackData = [
            { lat: 54.6916, lng: 25.2874, info: "Attack from Lithuania", freq: 14978 },
            { lat: 10.2502, lng: 105.9651, info: "Attack from Vietnam", freq: 14106 },
            { lat: 22.3193, lng: 114.169, info: "Attack from Hong Kong", freq: 6216 },
            { lat: 48.9742, lng: 8.1851, info: "Attack from France", freq: 3918 },
            { lat: -17.743, lng: 168.317, info: "Attack from Vanuatu", freq: 624 },
            { lat: 41.8781, lng: -87.6298, info: "Attack from United States", freq: 313 },
            { lat: 52.1783, lng: 21.0602, info: "Attack from Poland", freq: 98 },
            { lat: 30.0507, lng: 31.2489, info: "Attack from Egypt", freq: 26 },
            { lat: 55.7558, lng: 37.6173, info: "Attack from Russia", freq: 4 },
            { lat: 54.9072, lng: 24.0019, info: "Attack from Lithuania", freq: 2 },
            { lat: 36.5916, lng: 127.2916, info: "Attack from South Korea", freq: 2 },
            { lat: 52.2299, lng: 21.0093, info: "Attack from Poland", freq: 2 }
        ];

        // Function to calculate the color based on frequency
        function getColor(frequency) {
            var minFreq = Math.min(...attackData.map(a => a.freq));  // Get the minimum frequency
            var maxFreq = Math.max(...attackData.map(a => a.freq));  // Get the maximum frequency

            var ratio = (frequency - minFreq) / (maxFreq - minFreq);  // Normalize to 0-1 range

            var red = Math.min(255, Math.floor(255 * ratio));  // Red increases with frequency
            var blue = Math.min(255, Math.floor(255 * (1 - ratio)));  // Blue decreases with frequency

            return `rgb(${red}, 0, ${blue})`;  // Return the color
        }

        // Initialize the map
        var map = L.map('map').setView([20, 0], 2);  // Default world view

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Add markers with custom size and color
        attackData.forEach(function(attack) {
            // Calculate size based on frequency, with a minimum size for visibility
            var size = Math.max(5, Math.min(attack.freq / 500, 30));  // Ensure minimum size for visibility

            // Add the marker with frequency-based size and color
            L.circleMarker([attack.lat, attack.lng], {
                radius: size,  // Size based on frequency
                fillColor: getColor(attack.freq),  // Color based on frequency
                color: "white",  // Border color
                weight: 1,
                opacity: 0.7,
                fillOpacity: 0.5
            }).addTo(map)
                .bindPopup(attack.info + "<br>Frequency: " + attack.freq);  // Show info and frequency on hover
        });
    </script>
</body>
</html>
